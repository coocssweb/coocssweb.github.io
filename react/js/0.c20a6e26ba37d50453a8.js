webpackJsonp([0],{279:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(5),l=t.n(a),i=t(2),r=t.n(i),c=t(8),s=t.n(c),o=t(4),u=t.n(o),m=t(3),f=t.n(m),d=t(305),v=(t.n(d),t(0)),p=t.n(v),h=t(291),E=t(299),_=t(300),b=t(301),y=t(302),N=t(303),k=function(e){function n(e){r()(this,n);var t=u()(this,(n.__proto__||l()(n)).call(this,e));return t.state={placement:"right",visible:!1},t}return f()(n,e),s()(n,[{key:"onOpen",value:function(e){this.setState({placement:e,visible:!0})}},{key:"render",value:function(){return p.a.createElement("div",{className:"demo demo--coostore"},p.a.createElement("h1",{className:"demo-title"},"简易的组件通讯模式"),p.a.createElement("div",{className:"demo-description"},"采用观察者模式，通过subscribe、notify实现组件内的通讯",p.a.createElement("br",null),"因此，层级很深的两个组件，不用通过props、ref来一层一层的回调",p.a.createElement("br",null),"可以打开调试面板看console.log，点击时只会render对应的组件，发起事件通知时，不用经过父组件传递，因此不会触发其他组件的更新。"),p.a.createElement("div",{className:"panel"},p.a.createElement("h2",{className:"panel-title"},"演示"),p.a.createElement("div",{className:"panel-content"},p.a.createElement("div",{className:"panel-line"},p.a.createElement(E.a,null,p.a.createElement(b.a,null))),p.a.createElement("div",{className:"panel-line"},p.a.createElement(_.a,null,p.a.createElement(y.a,null),p.a.createElement(N.a,null))))),p.a.createElement("div",{className:"panel"},p.a.createElement("h2",{className:"panel-title"},"代码"),p.a.createElement("div",{className:"panel-content"},p.a.createElement(h.a,null,"componentDidMount () {\n    // 组件内添加订阅\n    this.unsubscribe = cooStore.subscribe('level2_2', this.setCount.bind(this));\n}\ncomponentWillUnmount () {\n    // 删除订阅\n    this.unsubscribe();\n}\n// 通知按钮\n<Button onClick={() => {\n    cooStore.notify('level2_2');\n}}>通知【第二层:2-2】数据变化了</Button>"))),p.a.createElement("div",{className:"panel"},p.a.createElement("h2",{className:"panel-title"},"属性"),p.a.createElement("div",{className:"panel-content"})))}}]),n}(v.Component);n.default=k},291:function(e,n,t){"use strict";var a=t(35),l=t.n(a),i=t(294),r=t.n(i),c=t(0),s=t.n(c),o=t(65),u=t(66),m=r()(["\n  font-family: sans-serif;\n  text-align: center;\n  padding: 10px;\n  background-color: rgb(42, 39, 52);\n  max-width: 800px;\n"],["\n  font-family: sans-serif;\n  text-align: center;\n  padding: 10px;\n  background-color: rgb(42, 39, 52);\n  max-width: 800px;\n"]),f=r()(["\n  text-align: left;\n  margin: 2px 0;\n  line-height: 1.3;\n"],["\n  text-align: left;\n  margin: 2px 0;\n  line-height: 1.3;\n"]),d=r()(["\n  display: inline-block;\n  width: 2em;\n  user-select: none;\n  opacity: 0.3;\n  color: #fff;\n"],["\n  display: inline-block;\n  width: 2em;\n  user-select: none;\n  opacity: 0.3;\n  color: #fff;\n"]),v=u.default.div(m),p=u.default.pre(f),h=u.default.span(d);n.a=function(e){return s.a.createElement(v,null,s.a.createElement(o.default,l()({},o.defaultProps,{code:e.children,language:"jsx"}),function(e){var n=e.className,t=e.style,a=e.tokens,l=e.getLineProps,i=e.getTokenProps;return s.a.createElement("div",{className:n,style:t},a.map(function(e,n){return s.a.createElement(p,l({line:e,key:n}),s.a.createElement(h,null,n+1),e.map(function(e,n){return s.a.createElement("span",i({token:e,key:n}))}))}))}))}},292:function(e,n,t){e.exports={default:t(295),__esModule:!0}},293:function(e,n,t){e.exports={default:t(296),__esModule:!0}},294:function(e,n,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var l=t(292),i=a(l),r=t(293),c=a(r);n.default=function(e,n){return(0,c.default)((0,i.default)(e,{raw:{value:(0,c.default)(n)}}))}},295:function(e,n,t){t(297);var a=t(9).Object;e.exports=function(e,n){return a.defineProperties(e,n)}},296:function(e,n,t){t(298),e.exports=t(9).Object.freeze},297:function(e,n,t){var a=t(12);a(a.S+a.F*!t(17),"Object",{defineProperties:t(111)})},298:function(e,n,t){var a=t(18),l=t(110).onFreeze;t(112)("freeze",function(e){return function(n){return e&&a(n)?e(l(n)):n}})},299:function(e,n,t){"use strict";var a=t(5),l=t.n(a),i=t(2),r=t.n(i),c=t(8),s=t.n(c),o=t(4),u=t.n(o),m=t(3),f=t.n(m),d=t(0),v=t.n(d),p=function(e){function n(e){r()(this,n);var t=u()(this,(n.__proto__||l()(n)).call(this,e));return t.state={},t}return f()(n,e),s()(n,[{key:"render",value:function(){return v.a.createElement("div",{className:"level"},v.a.createElement("div",{className:"level-name"},"第一层：1-1"),this.props.children)}}]),n}(d.Component);n.a=p},300:function(e,n,t){"use strict";var a=t(5),l=t.n(a),i=t(2),r=t.n(i),c=t(8),s=t.n(c),o=t(4),u=t.n(o),m=t(3),f=t.n(m),d=t(0),v=t.n(d),p=function(e){function n(e){r()(this,n);var t=u()(this,(n.__proto__||l()(n)).call(this,e));return t.state={},t}return f()(n,e),s()(n,[{key:"render",value:function(){return v.a.createElement("div",{className:"level"},v.a.createElement("div",{className:"level-name"},"第一层：1-2"),this.props.children)}}]),n}(d.Component);n.a=p},301:function(e,n,t){"use strict";var a=t(5),l=t.n(a),i=t(2),r=t.n(i),c=t(8),s=t.n(c),o=t(4),u=t.n(o),m=t(3),f=t.n(m),d=t(0),v=t.n(d),p=t(109),h=function(e){function n(e){r()(this,n);var t=u()(this,(n.__proto__||l()(n)).call(this,e));return t.state={},t}return f()(n,e),s()(n,[{key:"notifyLevel2_2",value:function(){p.f.notify("level2_2")}},{key:"notifyLevel2_3",value:function(){p.f.notify("level2_3")}},{key:"render",value:function(){return v.a.createElement("div",{className:"level"},v.a.createElement("div",{className:"level-name"},"第二层：2-1"),v.a.createElement(p.c,{onClick:this.notifyLevel2_2.bind(this)},"通知【第二层:2-2】数据变化了"),v.a.createElement(p.c,{onClick:this.notifyLevel2_3.bind(this)},"通知【第二层:2-3】数据变化了"))}}]),n}(d.Component);n.a=h},302:function(e,n,t){"use strict";var a=t(5),l=t.n(a),i=t(2),r=t.n(i),c=t(8),s=t.n(c),o=t(4),u=t.n(o),m=t(3),f=t.n(m),d=t(0),v=t.n(d),p=t(109),h=function(e){function n(e){r()(this,n);var t=u()(this,(n.__proto__||l()(n)).call(this,e));return t.state={count:0},t}return f()(n,e),s()(n,[{key:"componentDidMount",value:function(){this.unsubscribe=p.f.subscribe("level2_2",this.setCount.bind(this))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"setCount",value:function(){this.setState(function(e){return{count:e.count+1}})}},{key:"render",value:function(){return console.log("update render 第二层：2-2"),v.a.createElement("div",{className:"level"},v.a.createElement("div",{className:"level-name"},"第二层：2-2"),v.a.createElement("div",{className:"level-content"},v.a.createElement("div",{className:"level-display"},"按钮点击了【",this.state.count,"】次")))}}]),n}(d.Component);n.a=h},303:function(e,n,t){"use strict";var a=t(5),l=t.n(a),i=t(2),r=t.n(i),c=t(8),s=t.n(c),o=t(4),u=t.n(o),m=t(3),f=t.n(m),d=t(0),v=t.n(d),p=t(109),h=function(e){function n(e){r()(this,n);var t=u()(this,(n.__proto__||l()(n)).call(this,e));return t.state={count:0},t}return f()(n,e),s()(n,[{key:"componentDidMount",value:function(){this.unsubscribe=p.f.subscribe("level2_3",this.setCount.bind(this))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"setCount",value:function(){this.setState(function(e){return{count:e.count+1}})}},{key:"render",value:function(){return console.log("update render 第二层：2-3"),v.a.createElement("div",{className:"level"},v.a.createElement("div",{className:"level-name"},"第二层：2-3"),v.a.createElement("div",{className:"level-content"},v.a.createElement("div",{className:"level-display"},"按钮点击了【",this.state.count,"】次")))}}]),n}(d.Component);n.a=h},305:function(e,n){}});